<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.nf.wuneng.admin.dao.AdminDao">
    <resultMap id="adminMapper" type="edu.nf.wuneng.admin.entity.Admin">
        <result property="id" column="a_id"></result>
        <result property="name" column="a_name"></result>
        <result property="password" column="a_password"></result>
    </resultMap>

    <resultMap id="courseMapper" type="edu.nf.wuneng.admin.entity.Course">
        <id property="cid" column="c_id"></id>
        <result property="cname" column="c_name"></result>
        <result property="cintroduct" column="c_introduct"></result>
        <result property="cimg1" column="c_img1"></result>
        <result property="cimg2" column="c_img2"></result>
        <result property="cimg3" column="c_img3"></result>
    </resultMap>

    <resultMap id="courseAddrMapper" type="edu.nf.wuneng.admin.entity.CourseAddr">
        <id property="caId" column="ca_id"></id>
        <result property="caAddr" column="ca_addr"></result>
    </resultMap>

    <resultMap id="courseCationMapper" type="edu.nf.wuneng.admin.entity.CourseCation">
        <id property="id" column="cc_id"></id>
        <result property="name" column="cc_name"></result>

        <collection property="courseInfo" ofType="edu.nf.wuneng.admin.entity.CourseInfo">
            <id property="id" column="ci_id"></id>
            <result property="name" column="ci_name"></result>
            <result property="context" column="ci_context"></result>
            <result property="img" column="ci_img"></result>
            <result property="addr" column="ci_addr"></result>
            <result property="num" column="ci_num"></result>
        </collection>
    </resultMap>

    <resultMap id="courseInfoMapper" type="edu.nf.wuneng.admin.entity.CourseInfo">
        <id property="id" column="ci_id"></id>
        <result property="name" column="ci_name"></result>
        <result property="context" column="ci_context"></result>
        <result property="img" column="ci_img"></result>
        <result property="addr" column="ci_addr"></result>
        <result property="num" column="ci_num"></result>
    </resultMap>

    <resultMap id="hotCourseMapper" type="edu.nf.wuneng.admin.entity.HotCourse">
        <id property="id" column="i_id"></id>
        <result property="name" column="i_name"></result>
        <result property="context" column="i_context"></result>
        <result property="text" column="i_text"></result>
        <result property="img" column="i_img"></result>
        <result property="addr" column="i_addr"></result>
    </resultMap>

    <resultMap id="payCourseMapper" type="edu.nf.wuneng.admin.entity.PayCourse">
        <id property="id" column="p_id"></id>
        <result property="name" column="p_name"></result>
        <result property="context" column="p_context"></result>
        <result property="price" column="p_price"></result>
        <result property="cover" column="p_cover"></result>
        <result property="img1" column="p_img1"></result>
        <result property="img2" column="p_img2"></result>
    </resultMap>

    <select id="loginAdmin" resultMap="adminMapper">
        select a_id,a_name,a_password from admin where a_id=#{id}
    </select>

    <insert id="addCourse" parameterType="edu.nf.wuneng.admin.entity.Course">
        insert into course(c_id,c_name,c_introduct,c_img1,c_img2,c_img3) values(#{cid},#{cname},#{cintroduct},#{cimg1},#{cimg2},#{cimg3})
    </insert>

    <insert id="addCourseAddr" parameterType="edu.nf.wuneng.admin.entity.CourseAddr">
        insert into course_addr(ca_id,ca_addr) values
        <foreach collection="list" item="courseAddr" separator=",">
            (#{courseAddr.caId},#{courseAddr.caAddr})
        </foreach>
    </insert>

    <select id="listCourseCation" resultMap="courseCationMapper">
        select ci.ci_id,ci.ci_name,ci.ci_context,ci.ci_addr,ci.ci_num,cc.cc_id,cc.cc_name from course_info ci,course_cation cc
    </select>

    <select id="listCourseInfo" resultMap="courseInfoMapper">
        select ci_id,ci_name,ci_context,ci_img,ci_addr,ci_num from course_info
    </select>

    <select id="showHotCourse" resultMap="hotCourseMapper" parameterType="integer">
        select i_id,i_context,i_name,i_text,i_img,i_addr from it_hot_course where i_id=#{id}
    </select>

    <select id="listPayCourse" resultMap="payCourseMapper">
        select p_id,p_name,p_context,p_price,p_cover,p_img1,p_img2 from pay_course
    </select>

    <select id="getPayCourseById" resultMap="payCourseMapper" parameterType="integer">
        select p_id,p_name,p_context,p_price,p_cover,p_img1,p_img2 from pay_course where p_id=#{id}
    </select>
</mapper>